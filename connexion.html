<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title> Connexion jeunes 6.4</title>
    </head>
    <body>
        <form method="post">
            Mail :<input type="email" id="mail"><br>
            Mot de passe :<input type="password" id="mdp"><br>
            <p>inscription?</p>
            <label for="oui">oui</label>
            <input type="radio" name="inscription" value="oui"><br>
            <label for="non">non</label>
            <input type="radio" name="inscription" value="non" checked><br>
            <button type="submit" onclick="Submit()">Connexion</button>
            <button type="reset"> réinitialiser</button>
        </form>
        <script>
            function Submit(){
                var mdp = document.getElementById("mdp").value;
                var mail = document.getElementById("mail").value;
                if(mail == ""){
                    alert("merci de bien vouloir saisir une adresse mail");
                    return;
                }
                if(mdp == ""){
                    alert("merci de bien vouloir saisir votre mot de passe");
                    return;
                }
                var insc = document.getElementsByName("inscription");
                if (insc[0].checked){
                    insc = 1; //1 veut dire que l'on veut inscrire le nom
                }else{
                    insc = 0; //on n'inscrit pas l'adresse mail
                }
                var Ajax = new XMLHttpRequest();
                var liste = new FormData();
                liste.set("mail", mail);
                liste.set("mdp", mdp);
                liste.set("indice", insc);

                Ajax.onreadystatechange = function(){
                    if(this.readyState ==4 && this.status == 200){
                        if(this.responseText == 0){
                            if(insc == 0){
                                alert("mdp/mail incorrect ou non enregistré");
                            }else{//cas où insc ==1
                                alert("adresse mail déjà utilisé, inscription invalide");
                            }
                        }/*else{
                            document.location.href=this.responseText;
                        }*/
                    }
                }
                Ajax.open("POST", "connexion.php", true);
                Ajax.send(liste);
            }
        </script>
    </body>
</html>